(self["webpackChunkwakuwaku"]=self["webpackChunkwakuwaku"]||[]).push([[496],{3863:function(t,e,s){
/*!
  * Bootstrap collapse.js v5.2.0-beta1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,o){t.exports=o(s(4072),s(9286),s(8737),s(5695))})(0,(function(t,e,s,o){"use strict";const a=t=>t&&"object"===typeof t&&"default"in t?t:{default:t},l=a(e),i=a(s),r=a(o),n="collapse",c="bs.collapse",d=`.${c}`,u=".data-api",h=`show${d}`,p=`shown${d}`,g=`hide${d}`,f=`hidden${d}`,m=`click${d}${u}`,_="show",w="collapse",y="collapsing",v="collapsed",b=`:scope .${w} .${w}`,k="collapse-horizontal",C="width",S="height",T=".collapse.show, .collapse.collapsing",I='[data-bs-toggle="collapse"]',A={toggle:!0,parent:null},$={toggle:"boolean",parent:"(null|element)"};class P extends r.default{constructor(e,s){super(e,s),this._isTransitioning=!1,this._triggerArray=[];const o=i.default.find(I);for(const a of o){const e=t.getSelectorFromElement(a),s=i.default.find(e).filter((t=>t===this._element));null!==e&&s.length&&this._triggerArray.push(a)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return A}static get DefaultType(){return $}static get NAME(){return n}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(T).filter((t=>t!==this._element)).map((t=>P.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;const e=l.default.trigger(this._element,h);if(e.defaultPrevented)return;for(const l of t)l.hide();const s=this._getDimension();this._element.classList.remove(w),this._element.classList.add(y),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(y),this._element.classList.add(w,_),this._element.style[s]="",l.default.trigger(this._element,p)},a=s[0].toUpperCase()+s.slice(1),i=`scroll${a}`;this._queueCallback(o,this._element,!0),this._element.style[s]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const e=l.default.trigger(this._element,g);if(e.defaultPrevented)return;const s=this._getDimension();this._element.style[s]=`${this._element.getBoundingClientRect()[s]}px`,t.reflow(this._element),this._element.classList.add(y),this._element.classList.remove(w,_);for(const a of this._triggerArray){const e=t.getElementFromSelector(a);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([a],!1)}this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(y),this._element.classList.add(w),l.default.trigger(this._element,f)};this._element.style[s]="",this._queueCallback(o,this._element,!0)}_isShown(t=this._element){return t.classList.contains(_)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=t.getElement(e.parent),e}_getDimension(){return this._element.classList.contains(k)?C:S}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(I);for(const s of e){const e=t.getElementFromSelector(s);e&&this._addAriaAndCollapsedClass([s],this._isShown(e))}}_getFirstLevelChildren(t){const e=i.default.find(b,this._config.parent);return i.default.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const s of t)s.classList.toggle(v,!e),s.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const s=P.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof s[t])throw new TypeError(`No method named "${t}"`);s[t]()}}))}}return l.default.on(document,m,I,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const s=t.getSelectorFromElement(this),o=i.default.find(s);for(const t of o)P.getOrCreateInstance(t,{toggle:!1}).toggle()})),t.defineJQueryPlugin(P),P}))},8357:function(t,e,s){"use strict";function o(t,e,s,o,a,l){const i={search:"",category:t};!1!==e&&(i.tag=e),!1!==s&&(i.author=s),!1!==o&&(i.publisher=o),!0===a&&(i.isPopular=!0),!0===l&&(i.isOnSale=!0),this.$router.push({path:"/search",query:i})}function a(t){this.favorArr=JSON.parse(localStorage.getItem("favor"))||[];const e=this.favorArr.indexOf(t);if(-1===e){this.favorArr.push(t);const e={data:{success:!0}};this.$httpMessageState(e,"加入收藏")}else{this.favorArr.splice(e,1);const t={data:{success:!1,message:"favor"}};this.$httpMessageState(t,"取消收藏")}localStorage.setItem("favor",JSON.stringify(this.favorArr))}function l(t){const e="https://vue3-course-api.hexschool.io/api/wakuwaku-api/cart";this.status.loadingItem=t;const s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{this.status.loadingItem="",this.$httpMessageState(t,"加入購物車")}))}s.d(e,{Xq:function(){return l},ZP:function(){return o},ag:function(){return a}})},3674:function(t,e,s){"use strict";s.d(e,{Z:function(){return N}});var o=s(6252),a=s(3577);const l=t=>((0,o.dD)("data-v-928f44d8"),t=t(),(0,o.Cn)(),t),i={class:"card_container"},r={class:"card_pic",id:"eko"},n={key:0,class:"collect_icon"},c=l((()=>(0,o._)("i",{class:"fa-regular fa-sun"},null,-1))),d=[c],u={key:1,class:"collect_icon"},h=l((()=>(0,o._)("i",{class:"fa-solid fa-sun"},null,-1))),p=[h],g=["src"],f=["title"],m=["title"],_={class:"card_control"},w=["disabled"],y={class:"btn_price"},v={class:"btn_shopping_icon"},b={key:0,class:"spinner-border spinner-border-sm text-light",role:"status",style:{"margin-bottom":"0.2rem"}},k=l((()=>(0,o._)("span",{class:"visually-hidden"},"Loading...",-1))),C=[k],S={key:1,class:"fa-solid fa-cart-shopping","aria-hidden":"true"},T=l((()=>(0,o._)("span",{class:"btn_add"},"加入購物車",-1)));function I(t,e,s,l,c,h){const k=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",r,[(0,o._)("div",{class:"card_collect",onClick:e[0]||(e[0]=t=>h.addToFavor(s.productInfo.id))},[!1===h.isFavorite?((0,o.wg)(),(0,o.iD)("span",n,d)):((0,o.wg)(),(0,o.iD)("span",u,p))]),(0,o.Wm)(k,{class:"w-100",to:`/product/${s.productInfo.id}`},{default:(0,o.w5)((()=>[(0,o._)("img",{class:"w-100",src:s.productInfo.images[0],alt:"產品圖片"},null,8,g)])),_:1},8,["to"])]),(0,o.Wm)(k,{class:"card_content",to:`/product/${s.productInfo.id}`},{default:(0,o.w5)((()=>[(0,o._)("p",{class:"card_title words-loop",title:s.productInfo.title},(0,a.zw)(s.productInfo.title),9,f),(0,o._)("p",{class:"card_author",title:s.productInfo.author.join("、")},(0,a.zw)(s.productInfo.author.join("、")),9,m)])),_:1},8,["to"]),(0,o._)("div",_,[(0,o._)("button",{class:"card_cartBtn",onClick:e[1]||(e[1]=t=>h.addToCart(s.productInfo.id)),disabled:this.status.loadingItem===s.productInfo.id},[(0,o._)("span",y,"$"+(0,a.zw)(s.productInfo.price),1),(0,o._)("span",v,[this.status.loadingItem===s.productInfo.id?((0,o.wg)(),(0,o.iD)("div",b,C)):((0,o.wg)(),(0,o.iD)("i",S))]),T],8,w)])])}var A=s(8357),$={props:{productInfo:{type:Object,default(){return{}}}},computed:{isFavorite(){const t=this.favorArr.indexOf(this.productInfo.id);return-1!==t}},data(){return{favorIndex:"",favorArr:JSON.parse(localStorage.getItem("favor"))||[],changeCard:!1,tempProductInfo:{},status:{loadingItem:""}}},methods:{addToCart:A.Xq,addToFavor:A.ag}},P=s(3744);const D=(0,P.Z)($,[["render",I],["__scopeId","data-v-928f44d8"]]);var N=D},3496:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return he}});var o=s(6252),a=s(9963),l=s(3577);const i=t=>((0,o.dD)("data-v-0ad3b149"),t=t(),(0,o.Cn)(),t),r={class:"container"},n={class:"row"},c={class:"col-12 col-lg-3 category-list pb-3",style:{"background-color":"bisque","min-height":"500px"}},d={class:"list-group list-group-flush mt-3"},u=i((()=>(0,o._)("span",{class:"nav-item-icon"},[(0,o._)("i",{class:"fa-regular fa-face-smile"})],-1))),h=(0,o.Uk)(" 全部商品 "),p=[u,h],g=i((()=>(0,o._)("span",{class:"nav-item-icon"},[(0,o._)("i",{class:"fa-solid fa-arrow-trend-up"})],-1))),f=(0,o.Uk)(" 人氣熱門 "),m=[g,f],_=i((()=>(0,o._)("span",{class:"nav-item-icon"},[(0,o._)("i",{class:"fa-solid fa-arrows-down-to-line"})],-1))),w=(0,o.Uk)(" 現在特價 "),y=[_,w],v={class:"list-group-item",href:"#comicCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"true"},b=i((()=>(0,o._)("a",null,[(0,o._)("span",{class:"category-icon nav-item-icon"},[(0,o._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,o.Uk)(" 漫畫分類 ")],-1))),k=i((()=>(0,o._)("i",{class:"fa-solid fa-book"},null,-1))),C=(0,o.Uk)(" 全部漫畫 "),S=i((()=>(0,o._)("i",{class:"fa-solid fa-book"},null,-1))),T=(0,o.Uk)(" 熱門漫畫 "),I=i((()=>(0,o._)("i",{class:"fa-solid fa-book"},null,-1))),A=(0,o.Uk)(" 特價漫畫 "),$=i((()=>(0,o._)("li",null,[(0,o._)("hr")],-1))),P=i((()=>(0,o._)("i",{class:"fa-solid fa-hashtag"},null,-1))),D={class:"list-group-item",href:"#lightNovelCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"false"},N=i((()=>(0,o._)("a",null,[(0,o._)("span",{class:"category-icon nav-item-icon"},[(0,o._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,o.Uk)(" 輕小說分類 ")],-1))),L=i((()=>(0,o._)("i",{class:"fa-solid fa-book-journal-whills"},null,-1))),F=(0,o.Uk)(" 全部輕小說 "),Q=i((()=>(0,o._)("i",{class:"fa-solid fa-book-journal-whills"},null,-1))),q=(0,o.Uk)(" 熱門輕小說 "),U=i((()=>(0,o._)("i",{class:"fa-solid fa-book-journal-whills"},null,-1))),x=(0,o.Uk)(" 特價輕小說 "),z=i((()=>(0,o._)("li",null,[(0,o._)("hr")],-1))),O=i((()=>(0,o._)("i",{class:"fa-solid fa-hashtag"},null,-1))),W={class:"list-group-item",href:"#novelCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"false"},B=i((()=>(0,o._)("a",null,[(0,o._)("span",{class:"category-icon nav-item-icon"},[(0,o._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,o.Uk)(" 一般小說分類 ")],-1))),M=i((()=>(0,o._)("i",{class:"fa-solid fa-book-bookmark"},null,-1))),E=(0,o.Uk)(" 全部一般小說 "),j=i((()=>(0,o._)("i",{class:"fa-solid fa-book-bookmark"},null,-1))),H=(0,o.Uk)(" 熱門一般小說 "),Z=i((()=>(0,o._)("i",{class:"fa-solid fa-book-bookmark"},null,-1))),Y=(0,o.Uk)(" 特價一般小說 "),K=i((()=>(0,o._)("li",null,[(0,o._)("hr")],-1))),J=i((()=>(0,o._)("i",{class:"fa-solid fa-hashtag"},null,-1))),R={class:"list-group-item",href:"#nonfictionCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"false"},X=i((()=>(0,o._)("a",null,[(0,o._)("span",{class:"category-icon nav-item-icon"},[(0,o._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,o.Uk)(" 實用書分類 ")],-1))),G=i((()=>(0,o._)("i",{class:"fa-solid fa-book-atlas"},null,-1))),V=(0,o.Uk)(" 全部實用書 "),tt=i((()=>(0,o._)("i",{class:"fa-solid fa-book-atlas"},null,-1))),et=(0,o.Uk)(" 熱門實用書 "),st=i((()=>(0,o._)("i",{class:"fa-solid fa-book-atlas"},null,-1))),ot=(0,o.Uk)(" 特價實用書 "),at=i((()=>(0,o._)("li",null,[(0,o._)("hr")],-1))),lt=i((()=>(0,o._)("i",{class:"fa-solid fa-hashtag"},null,-1))),it={class:"list-group-item",href:"#publisherCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"false"},rt=i((()=>(0,o._)("a",null,[(0,o._)("span",{class:"category-icon nav-item-icon"},[(0,o._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,o.Uk)(" 依出版社 ")],-1))),nt={class:"collapse mt-2",id:"publisherCollapse"},ct={class:"list-group-item",href:"#authorCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"false"},dt=i((()=>(0,o._)("a",null,[(0,o._)("span",{class:"category-icon nav-item-icon"},[(0,o._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,o.Uk)(" 依作者 ")],-1))),ut={class:"collapse mt-2 show",id:"authorCollapse"},ht={class:"col-12 col-lg-9 bg-light",style:{"min-height":"500px"}},pt={class:"row pt-2 search-title no-wrap"},gt={class:"fw-bold col-8"},ft={key:0},mt={key:1},_t={key:2},wt={class:"col-4 text-end"},yt={class:"fw-bold me-3"},vt={class:"row display-selection-zone py-2"},bt={class:"col-7 col-md-6 col-lg-4 d-flex"},kt=(0,o.uE)('<option value="correlation" data-v-0ad3b149>相關性</option><option value="dateN2O" selected data-v-0ad3b149>出版日期：新→舊</option><option value="dateO2N" data-v-0ad3b149>出版日期：舊→新</option><option value="priceH2L" data-v-0ad3b149>價格：高→低</option><option value="priceL2H" data-v-0ad3b149>價格：低→高</option><option value="nameA2Z" data-v-0ad3b149>名稱：A→Z</option><option value="nameZ2A" data-v-0ad3b149>名稱：Z→A</option>',7),Ct=[kt],St={class:"col-auto ms-auto",id:"display-mode"},Tt=i((()=>(0,o._)("i",{class:"bi bi-grid-3x3-gap-fill"},null,-1))),It=[Tt],At=["disabled"],$t=i((()=>(0,o._)("i",{class:"fa-solid fa-list"},null,-1))),Pt=[$t];function Dt(t,e,s,i,u,h){const g=(0,o.up)("LoadingOverlay"),f=(0,o.up)("router-link"),_=(0,o.up)("product-card"),w=(0,o.up)("detail-card");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(g,{active:t.isLoading},null,8,["active"]),(0,o._)("div",r,[(0,o._)("div",n,[(0,o._)("div",c,[(0,o._)("ul",d,[(0,o._)("li",{class:"list-group-item",onClick:e[0]||(e[0]=(0,a.iM)((t=>h.routeToFn("all")),["prevent"]))},p),(0,o._)("li",{class:"list-group-item",onClick:e[1]||(e[1]=(0,a.iM)((t=>h.routeToFn("all",!1,!1,!1,!0)),["prevent"]))},m),(0,o._)("li",{class:"list-group-item",onClick:e[2]||(e[2]=(0,a.iM)((t=>h.routeToFn("all",!1,!1,!1,!1,!0)),["prevent"]))},y),(0,o._)("li",v,[b,(0,o._)("ul",{class:(0,l.C_)(["collapse mt-2",["comic"===u.tempSearchQuery.category?"collapse show":""]]),id:"comicCollapse"},[(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#comicCollapse .show",onClick:e[3]||(e[3]=t=>h.routeToFn("comic"))},{default:(0,o.w5)((()=>[k,C])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#comicCollapse .show",onClick:e[4]||(e[4]=t=>h.routeToFn("comic",!1,!1,!1,!0))},{default:(0,o.w5)((()=>[S,T])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#comicCollapse .show",onClick:e[5]||(e[5]=t=>h.routeToFn("comic",!1,!1,!1,!1,!0))},{default:(0,o.w5)((()=>[I,A])),_:1})]),$,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.comicTags,((t,e)=>((0,o.wg)(),(0,o.iD)("li",{key:"comic-"+e},[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#comicCollapse .show",onClick:e=>h.routeToFn("comic",t)},{default:(0,o.w5)((()=>[P,(0,o.Uk)(" "+(0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))],2)]),(0,o._)("li",D,[N,(0,o._)("ul",{class:(0,l.C_)(["collapse mt-2",["lightNovel"===u.tempSearchQuery.category?"collapse show":""]]),id:"lightNovelCollapse"},[(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#lightNovelCollapse .show",onClick:e[6]||(e[6]=t=>h.routeToFn("lightNovel"))},{default:(0,o.w5)((()=>[L,F])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#lightNovelCollapse .show",onClick:e[7]||(e[7]=t=>h.routeToFn("lightNovel",!1,!1,!1,!0))},{default:(0,o.w5)((()=>[Q,q])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#lightNovelCollapse .show",onClick:e[8]||(e[8]=t=>h.routeToFn("lightNovel",!1,!1,!1,!1,!0))},{default:(0,o.w5)((()=>[U,x])),_:1})]),z,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.lightNovelTags,((t,e)=>((0,o.wg)(),(0,o.iD)("li",{key:"lightNovel-"+e},[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#lightNovelCollapse .show",onClick:e=>h.routeToFn("lightNovel",t)},{default:(0,o.w5)((()=>[O,(0,o.Uk)((0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))],2)]),(0,o._)("li",W,[B,(0,o._)("ul",{class:(0,l.C_)(["collapse mt-2",["novel"===u.tempSearchQuery.category?"collapse show":""]]),id:"novelCollapse"},[(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#novelCollapse .show",onClick:e[9]||(e[9]=t=>h.routeToFn("novel"))},{default:(0,o.w5)((()=>[M,E])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#novelCollapse .show",onClick:e[10]||(e[10]=t=>h.routeToFn("novel",!1,!1,!1,!0))},{default:(0,o.w5)((()=>[j,H])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#novelCollapse .show",onClick:e[11]||(e[11]=t=>h.routeToFn("novel",!1,!1,!1,!1,!0))},{default:(0,o.w5)((()=>[Z,Y])),_:1})]),K,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.novelTags,((t,e)=>((0,o.wg)(),(0,o.iD)("li",{key:"novel-"+e},[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#novelCollapse .show",onClick:e=>h.routeToFn("novel",t)},{default:(0,o.w5)((()=>[J,(0,o.Uk)((0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))],2)]),(0,o._)("li",R,[X,(0,o._)("ul",{class:(0,l.C_)(["collapse mt-2",["nonfiction"===u.tempSearchQuery.category?"collapse show":""]]),id:"nonfictionCollapse"},[(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#nonfictionCollapse .show",onClick:e[12]||(e[12]=t=>h.routeToFn("nonfiction"))},{default:(0,o.w5)((()=>[G,V])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#nonfictionCollapse .show",onClick:e[13]||(e[13]=t=>h.routeToFn("nonfiction",!1,!1,!1,!0))},{default:(0,o.w5)((()=>[tt,et])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#nonfictionCollapse .show",onClick:e[14]||(e[14]=t=>h.routeToFn("nonfiction",!1,!1,!1,!1,!0))},{default:(0,o.w5)((()=>[st,ot])),_:1})]),at,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.nonfictionTags,((t,e)=>((0,o.wg)(),(0,o.iD)("li",{key:"nonfiction-"+e},[(0,o.Wm)(f,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#nonfictionCollapse .show",onClick:e=>h.routeToFn("nonfiction",t)},{default:(0,o.w5)((()=>[lt,(0,o.Uk)((0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))],2)]),(0,o._)("li",it,[rt,(0,o._)("ul",nt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.tempPublisherList,((t,e)=>((0,o.wg)(),(0,o.iD)("li",{key:"publisher-"+e},[(0,o.Wm)(f,{class:"dropdown-item",to:"",onClick:e=>h.routeToFn("all",!1,!1,t)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))])]),(0,o._)("li",ct,[dt,(0,o._)("ul",ut,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.tempAuthorList,((t,e)=>((0,o.wg)(),(0,o.iD)("li",{key:"author-"+e},[(0,o.Wm)(f,{class:"dropdown-item",to:"",onClick:e=>h.routeToFn("all",!1,t)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))])])])]),(0,o._)("div",ht,[(0,o._)("div",pt,[(0,o._)("h4",gt,[u.tempSearchQuery.categoryCN?((0,o.wg)(),(0,o.iD)("span",ft,(0,l.zw)(u.tempSearchQuery.categoryCN),1)):(0,o.kq)("",!0),(0,o._)("span",null,(0,l.zw)(this.$route.query.search.split(" ").join(", ")),1),u.tempSearchQuery.ps?((0,o.wg)(),(0,o.iD)("span",mt,(0,l.zw)(u.tempSearchQuery.ps),1)):(0,o.kq)("",!0),""!==u.tempSearchQuery.search?((0,o.wg)(),(0,o.iD)("span",_t," 的搜尋結果")):(0,o.kq)("",!0)]),(0,o._)("div",wt,[(0,o._)("h4",yt,(0,l.zw)(h.filteredProducts.length)+" 筆",1)])]),(0,o._)("div",vt,[(0,o._)("div",bt,[(0,o.wy)((0,o._)("select",{class:"form-select","aria-label":"sort by","onUpdate:modelValue":e[15]||(e[15]=t=>u.sortBy=t)},Ct,512),[[a.bM,u.sortBy]])]),(0,o._)("div",St,[(0,o._)("button",{class:(0,l.C_)(["btn",{active:"grid"===u.displayMode}]),title:"Grid",onClick:e[16]||(e[16]=t=>u.displayMode="grid")},It,2),(0,o._)("button",{class:(0,l.C_)(["btn",{active:"list"===u.displayMode}]),title:"List",onClick:e[17]||(e[17]=t=>u.displayMode="list"),disabled:u.window.width<=768&&0!==u.window.width},Pt,10,At)])]),"grid"===u.displayMode?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,l.C_)(["row grid-container",{show:"grid"===this.displayMode}])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.filteredProducts,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"col-6 col-md-4 col-xl-3 g-0 gy-0 d-flex",key:t.id},[(0,o.Wm)(_,{class:"mx-auto my-3 shadow-none search-product-card change","product-info":t},null,8,["product-info"])])))),128))],2)):(0,o.kq)("",!0),"list"===u.displayMode?((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,l.C_)(["mt-2 list-container",{show:"list"===this.displayMode}])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.filteredProducts,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"mb-3",key:t.id},[(0,o.Wm)(w,{class:"product-card-detail change","product-info":t},null,8,["product-info"])])))),128))],2)):(0,o.kq)("",!0)])])])],64)}var Nt=s(3674);const Lt=t=>((0,o.dD)("data-v-2d5e0546"),t=t(),(0,o.Cn)(),t),Ft={class:"card_container"},Qt={class:"pic_box"},qt=["src"],Ut={class:"info_container"},xt=["title"],zt={class:"d-flex product_info"},Ot=["title"],Wt=["title"],Bt=["title"],Mt={class:"des_short bg-light"},Et=(0,o.Uk)("... more"),jt={class:"card_control"},Ht={class:"product_price ms-3"},Zt={key:0},Yt={class:"cart_btn"},Kt=["disabled"],Jt={key:0,class:"spinner-border spinner-border-sm d-inline-block mx-1",role:"status"},Rt=Lt((()=>(0,o._)("span",{class:"visually-hidden"},"Loading...",-1))),Xt=[Rt],Gt={key:1,class:"fa-solid fa-cart-shopping","aria-hidden":"true"},Vt=(0,o.Uk)(" 加入購物車 "),te={key:0,class:"fa-regular fa-sun d-flex fs-4"},ee={key:1,class:"fa-solid fa-sun d-flex fs-4"};function se(t,e,s,a,i,r){const n=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",Ft,[(0,o._)("div",Qt,[(0,o.Wm)(n,{class:"w-100",to:`/product/${s.productInfo.id}`},{default:(0,o.w5)((()=>[(0,o._)("img",{class:"w-100",src:s.productInfo.images[0],alt:"產品圖片"},null,8,qt)])),_:1},8,["to"])]),(0,o._)("div",Ut,[(0,o._)("p",{title:s.productInfo.title,class:"product_title"},(0,l.zw)(s.productInfo.title),9,xt),(0,o._)("div",zt,[(0,o._)("p",{title:s.productInfo.author.join("、")},(0,l.zw)(s.productInfo.author.join("、")),9,Ot),(0,o._)("p",{class:"ms-5",title:s.productInfo.publisher},(0,l.zw)(s.productInfo.publisher),9,Wt),(0,o._)("p",{class:"",title:s.productInfo.pub_date},(0,l.zw)(t.$filters.date(s.productInfo.pub_date)),9,Bt)]),(0,o._)("div",Mt,[(0,o._)("p",null,[(0,o.Uk)((0,l.zw)(r.shortIntro)+" ",1),(0,o._)("span",null,[(0,o.Wm)(n,{to:`/product/${s.productInfo.id}`,class:""},{default:(0,o.w5)((()=>[Et])),_:1},8,["to"])])])]),(0,o._)("div",jt,[(0,o._)("div",Ht,[(0,o._)("p",null,[(0,o.Uk)(" $ "+(0,l.zw)(s.productInfo.price)+" ",1),s.productInfo.price<s.productInfo.origin_price?((0,o.wg)(),(0,o.iD)("span",Zt,"$ "+(0,l.zw)(s.productInfo.origin_price),1)):(0,o.kq)("",!0)])]),(0,o._)("div",Yt,[(0,o._)("button",{class:"btn",onClick:e[0]||(e[0]=t=>r.addToCart(s.productInfo.id)),disabled:this.status.loadingItem===s.productInfo.id},[this.status.loadingItem===s.productInfo.id?((0,o.wg)(),(0,o.iD)("div",Jt,Xt)):((0,o.wg)(),(0,o.iD)("i",Gt)),Vt],8,Kt),(0,o._)("button",{class:"btn",onClick:e[1]||(e[1]=t=>r.addToFavor(s.productInfo.id))},[r.isFavorite?((0,o.wg)(),(0,o.iD)("i",ee)):((0,o.wg)(),(0,o.iD)("i",te))])])])])])}var oe=s(8357),ae={data(){return{favorArr:JSON.parse(localStorage.getItem("favor"))||[],status:{loadingItem:""}}},props:{productInfo:{type:Object,default(){return{}}}},computed:{isFavorite(){const t=this.favorArr.indexOf(this.productInfo.id);return-1!==t},shortIntro(){const t=this.productInfo.des_short;return window.innerWidth>992?t&&t.length>=180?t.slice(0,180):t:t&&t.length>=100?t.slice(0,100):t}},methods:{addToCart:oe.Xq,addToFavor:oe.ag},mounted(){}},le=s(3744);const ie=(0,le.Z)(ae,[["render",se],["__scopeId","data-v-2d5e0546"]]);var re=ie,ne=s(3863),ce=s.n(ne),de={components:{ProductCard:Nt.Z,DetailCard:re},data(){return{window:{width:0,height:0},displayMode:"grid",sortBy:"dateN2O",allProducts:[],comicTags:[],lightNovelTags:[],novelTags:[],nonfictionTags:[],tempProducts:[],tempSearchQuery:{tempCategoryCN:"",ps:""},tempPublisherList:[],tempAuthorList:[],favorArr:JSON.parse(localStorage.getItem("favor"))||[]}},watch:{"window.width":function(){this.window.width<=768&&(this.displayMode="grid")},"$route.query":{handler:function(){this.tempSearchQuery=this.$route.query,"comic"===this.$route.query.category?(this.tempSearchQuery.categoryCN="漫畫, ",""===this.$route.query.search&&(this.tempSearchQuery.ps="全部")):"lightNovel"===this.$route.query.category?(this.tempSearchQuery.categoryCN="輕小說, ",""===this.$route.query.search&&(this.tempSearchQuery.ps="全部")):"novel"===this.$route.query.category?(this.tempSearchQuery.categoryCN="一般小說, ",""===this.$route.query.search&&(this.tempSearchQuery.ps="全部")):"nonfiction"===this.$route.query.category?(this.tempSearchQuery.categoryCN="實用書, ",""===this.$route.query.search&&(this.tempSearchQuery.ps="全部")):""===this.$route.query.search&&"all"===this.$route.query.category&&(this.tempSearchQuery.categoryCN="全部 "),this.tempSearchQuery.isPopular?this.tempSearchQuery.ps="熱門":this.tempSearchQuery.isOnSale&&(this.tempSearchQuery.ps="特價"),this.tempSearchQuery.tag?this.tempSearchQuery.ps=this.tempSearchQuery.tag:this.tempSearchQuery.publisher?this.tempSearchQuery.ps=this.tempSearchQuery.publisher:this.tempSearchQuery.author&&(this.tempSearchQuery.ps=this.tempSearchQuery.author),window.scroll({top:0})},immediate:!0}},computed:{filteredProducts(){let t=[];if(this.filterByCategory(this.allProducts,this.tempSearchQuery.category),""===this.$route.query.search)t=this.$route.query.isPopular?this.matchPopularOrOnsale(this.tempProducts,!0):this.$route.query.isOnSale?this.matchPopularOrOnsale(this.tempProducts,!1,!0):this.$route.query.tag?this.matchTags(this.tempProducts,this.$route.query.tag):this.$route.query.publisher?this.matchPublisher(this.tempProducts,this.$route.query.publisher):this.$route.query.author?this.matchAuthor(this.tempProducts,this.$route.query.author):this.tempProducts;else{this.sortBy="correlation";const e=this.$route.query.search.trim().toLowerCase().replace(/\(/g,"\\(").replace(/\)/g,"\\)");this.tempSearchQuery.searchArr=e.split(" "),this.tempSearchQuery.searchArr.splice(0,0,e),t=this.filterFn(this.tempProducts,this.tempSearchQuery.searchArr)}this.tempPublisherList=this.listAllPublisher(this.allProducts),this.tempAuthorList=this.listAllAuthor(t);const e=[...new Set(t)];let s=[];return"correlation"===this.sortBy?s=e:"dateN2O"===this.sortBy?s=this.sortByDate(e):"dateO2N"===this.sortBy?s=this.sortByDate(e).reverse():"priceH2L"===this.sortBy?s=this.sortByPrice(e):"priceL2H"===this.sortBy?s=this.sortByPrice(e).reverse():"nameA2Z"===this.sortBy?s=this.sortByName(e):"nameZ2A"===this.sortBy&&(s=this.sortByName(e).reverse()),s}},methods:{handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},getProducts(){const t="https://vue3-course-api.hexschool.io/api/wakuwaku-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{if(this.isLoading=!1,t.data.success){const e=Object.values(t.data.products);this.allProducts=e,this.comicTags=this.categoryAllTags(this.allProducts,"comic"),this.lightNovelTags=this.categoryAllTags(this.allProducts,"lightNovel"),this.novelTags=this.categoryAllTags(this.allProducts,"novel"),this.nonfictionTags=this.categoryAllTags(this.allProducts,"nonfiction")}}))},categoryAllTags(t,e){const s=[],o=t.filter((t=>t.category===e));0==o.length&&console.error("wrong category"),o.forEach((t=>{s.push(...t.tags)}));const a=[...new Set(s)];return a},listAllPublisher(t){const e=[];t.forEach((t=>{e.push(t.publisher)}));const s=[...new Set(e)];return s},listAllAuthor(t){const e=[];t.forEach((t=>{e.push(...t.author)}));const s=[...new Set(e)];return s},filterByCategory(t,e){this.tempProducts="all"===e?[...t]:t.filter((t=>t.category===e))},filterFn(t,e){const s=[];if(e){const o=[...e];o.forEach((e=>{const o=this.matchName(t,e);s.push(...o)})),o.forEach((e=>{const o=this.matchSeries(t,e);s.push(...o)})),o.forEach((e=>{const o=this.matchAuthor(t,e);s.push(...o)})),o.forEach((e=>{const o=this.matchPublisher(t,e);s.push(...o)})),0==s.length&&o.forEach((e=>{const o=this.matchTags(t,e);s.push(...o)}))}return s},matchName(t,e){const s=t.filter((t=>(t.title.trim().toLowerCase(),t.title.match(e))));return s},matchSeries(t,e){const s=t.filter((t=>t.series.trim().toLowerCase().match(e)));return s},matchAuthor(t,e){const s=e.toLowerCase(),o=t.filter((t=>t.author.join().trim().toLowerCase().match(s)));return o},matchPublisher(t,e){const s=e.toLowerCase(),o=t.filter((t=>t.publisher.toLowerCase().match(s)));return o},matchTags(t,e){const s=t.filter((t=>t.tags.join().trim().toLowerCase().match(e)));return s},matchPopularOrOnsale(t,e,s){let o=[];return e?o=t.filter((t=>!0===t.is_popular)):s&&(o=t.filter((t=>t.price<t.origin_price))),o},routeToFn:oe.ZP,sortByDate(t){const e=[...t];return e.sort(((t,e)=>t.pub_date>e.pub_date?-1:t.pub_date<e.pub_date?1:0)),e},sortByPrice(t){const e=[...t];return e.sort(((t,e)=>t.price>e.price?-1:t.price<e.price?1:0)),e},sortByName(t){const e=[...t];return e.sort(((t,e)=>t.title<e.title?-1:t.title>e.title?1:0)),e}},created(){window.addEventListener("resize",this.handleResize),this.handleResize;const t=document.querySelectorAll(".collapse");[...t].map((t=>new(ce())(t)));this.getProducts()},destroyed(){window.removeEventListener("resize",this.handleResize)},mounted(){}};const ue=(0,le.Z)(de,[["render",Dt],["__scopeId","data-v-0ad3b149"]]);var he=ue}}]);
//# sourceMappingURL=496.19182a69.js.map